<mat-card *ngIf="!selectedSubBand">
  Please select a band to see its details.
</mat-card>

<mat-card
  *ngIf="selectedSubBand && selectedSubBand.type !== 'divider'"
  class="grid-container"
>
  <div class="reset-columns-container">
    <button mat-raised-button (click)="onResetColumns()">
      Reset Columns
    </button>
    <ng-container *ngIf="selectedSubBand.type === 'activity'">
      <input
        class="flex-filter"
        matInput
        placeholder="Filter Activities In Graph By Name (e.g. DSS.*85.*|DSS.*86.*)"
        [(ngModel)]="displayedFilter"
      />
      <span class="filter-message" *ngIf="displayedFilter !== activityFilter"
        >Click filter icon to apply filter</span
      >
      <mat-icon
        class="filter-icon"
        matTooltip="Filter Activities"
        (click)="
          updateFilterActivityInSubBand.emit({
            bandId: selectedBandId,
            subBandId: selectedSubBand.id,
            filter: displayedFilter
          })
        "
      >
        filter_list
      </mat-icon>
    </ng-container>
  </div>

  <div class="flex-container">
    <ag-grid-angular
      #agGrid
      class="ag-theme-fresh"
      [columnDefs]="columnDefs"
      [enableColResize]="true"
      [enableSorting]="true"
      [enableFilter]="true"
      [fullWidthCellRendererFramework]="getFullWidthCellRenderer()"
      [getNodeChildDetails]="getNodeChildDetails"
      [getRowHeight]="getRowHeight"
      [gridOptions]="gridOptions"
      [isFullWidthCell]="isFullWidthCell"
      [rowSelection]="rowSelection"
      (columnVisible)="emitUpdateTableColumns()"
      (columnMoved)="emitUpdateTableColumns()"
      (columnResized)="emitUpdateTableColumns()"
      (gridReady)="onGridReady($event)"
      (selectionChanged)="onSelectionChanged($event)"
      (sortChanged)="emitUpdateTableColumns()"
    >
    </ag-grid-angular>
    <div
      class="edit-button-container"
      *ngIf="points.length > 0 && points[0].editable && mode !== 'minimal'"
    >
      <button mat-raised-button class="edit-button" (click)="onAdd()">
        Add
      </button>
      <button
        *ngIf="!noneSelected()"
        mat-raised-button
        class="edit-button"
        (click)="onRemove()"
      >
        Remove
      </button>
      <button
        *ngIf="selectedSubBand.pointsChanged"
        mat-raised-button
        class="edit-button"
        (click)="save.emit()"
      >
        Save
      </button>
    </div>
  </div>
</mat-card>

<mat-toolbar color="primary">
  <button mat-icon-button (click)="toggleLeftDrawer()">
    <mat-icon class="mat-24" aria-label="Menu">
      menu
    </mat-icon>
  </button>

  <span class="app-title">Raven2</span>

  <span class="spacer"></span>

  <button mat-icon-button matTooltip="global settings"
    (click)="drawer='globals'; globalSettingsDrawer.toggle()">
    <mat-icon class="mat-24" aria-label="List">
      settings
    </mat-icon>
  </button>
  <button mat-icon-button matTooltip="manage epochs"
    (click)="drawer='epochs'; globalSettingsDrawer.toggle()">
      <mat-icon class="mat-24" aria-label="List">
        query_builder
      </mat-icon>
    </button>
  <button [matMenuTriggerFor]="menu" mat-icon-button>
    <mat-icon class="mat-24" aria-label="List">
      list
    </mat-icon>
  </button>

  <mat-menu #menu="matMenu" [overlapTrigger]="false" y-position="below">
    <button mat-menu-item (click)="toggleSouthBandsDrawer()">
      <mat-icon class="mat-24" aria-label="South Bands">
        view_agenda
      </mat-icon>
      Toggle South Bands
    </button>

    <button mat-menu-item (click)="toggleDetailsDrawer()">
      <mat-icon class="mat-24" aria-label="Details">
        assessment
      </mat-icon>
      Toggle Details
    </button>

    <button
      mat-menu-item
      (click)="togglePointDrawer()">
      <mat-icon
        class="mat-24"
        aria-label="Point">
        show_chart
      </mat-icon>
      Toggle Point
    </button>
  </mat-menu>
</mat-toolbar>
<div *ngIf="loading$ | async">
  <mat-progress-bar mode="query">
  </mat-progress-bar>
</div>
<div class="outlet">
  <router-outlet></router-outlet>
</div>
<mat-sidenav-container class="global-settings-drawer-container">
  <mat-sidenav position="end"
    [fixedInViewport]="true"
    [fixedTopGap]="40"
    #globalSettingsDrawer
    mode="over">
    <div *ngIf="drawer=='globals'">
    <raven-global-settings [currentTimeCursor]="currentTimeCursor"
      [tooltip]="tooltip"
      [labelWidth]="labelWidth"
      [defaultActivityLayout]="defaultSettings.activityLayout"
      [defaultFillColor]="defaultSettings.fillColor"
      [defaultIcon]="defaultSettings.icon"
      [defaultLabelFontSize]="defaultSettings.labelFontSize"
      [defaultLabelFont]="defaultSettings.labelFont"
      [defaultResourceColor]="defaultSettings.resourceColor"
      [colorPalette]="colorPalette"
      [dateFormat]="dateFormat"
      (changeDefaultActivityLayout)="onChangeDefaultActivityLayout($event)"
      (changeDefaultFillColor)="onChangeDefaultFillColor($event)"
      (changeDefaultIcon)="onChangeDefaultIcon($event)"
      (changeDefaultLabelFontSize)="onChangeDefaultLabelFontSize($event)"
      (changeDefaultLabelFont)="onChangeDefaultLabelFont($event)"
      (changeDefaultResourceColor)="onChangeDefaultResourceColor($event)"
      (changeLabelWidth)="onChangeLabelWidth($event)"
      (changeTooltip)="onChangeTooltip($event)"
      (changeCurrentTimeCursor)="onChangeCurrentTimeCursor($event)"
      (changeDateFormat)="onChangeDateFormat($event)">
    </raven-global-settings>
    </div>
    <div *ngIf="drawer=='epochs'">
      <raven-epochs
      [epochs]="epochs"
      [dayCode]="dayCode"
      [earthSecToEpochSec]="earthSecToEpochSec"
      [inUseEpoch]="inUseEpoch"
      (changeDayCode)="onChangeDayCode($event)"
      (changeEarthSecToEpochSec)="onChangeEarthSecToEpochSec($event)"
      (selectEpoch)="onSelectEpoch($event)"
      (importEpochs)="onImportEpochs($event)"></raven-epochs>
    </div>
    <div style="text-align:center;">
      <button mat-raised-button class="done-button" (click)="globalSettingsDrawer.toggle()">Done</button>
    </div>
  </mat-sidenav>
  <mat-sidenav-content>
    <span></span>
  </mat-sidenav-content>
</mat-sidenav-container>

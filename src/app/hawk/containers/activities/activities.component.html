<raven-app-header title="Activity Type" contextual="true" (menuClicked)="onMenuClicked()">
</raven-app-header>

<main class="content">
  <form id="activity-form" [formGroup]="form" (ngSubmit)="onSubmit(form.value)">
    <mat-sidenav-container hasBackdrop="false">
      <mat-sidenav mode="side" position="start" opened="true">
        <mat-form-field appearance="fill" floatLabel="always">
          <mat-label>Activity Type</mat-label>
          <mat-select
            placeholder="Select Activity Type"
            [formControl]="form.controls['activityTypeId']"
            [compareWith]="compareSelectValues"
            required>
            <mat-option *ngFor="let activityType of activityTypes | async" [value]="activityType.id">
              {{ activityType.name }}
            </mat-option>
          </mat-select>
          <mat-icon matSuffix>lock</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Activity Name</mat-label>
          <input matInput placeholder="Activity Name" type="text" [formControl]="form.controls['name']"
            required />
          <mat-icon matSuffix>mode_edit</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Start</mat-label>
          <input matInput placeholder="Start time" type="datetime-local"
            [formControl]="form.controls['start']" required />
          <mat-hint align="start">UTC within plan bounds</mat-hint>
          <mat-icon matSuffix>event</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Duration</mat-label>
          <input matInput placeholder="Duration" type="text" [formControl]="form.controls['duration']"
            required />
          <mat-hint align="start">hh:mm</mat-hint>
          <mat-icon matSuffix>hourglass_empty</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Intent</mat-label>
          <textarea matInput placeholder="Add intent" [formControl]="form.controls['intent']"></textarea>
          <mat-hint align="start">Optional</mat-hint>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Sequence ID</mat-label>
          <input matInput placeholder="Duration" type="text" [formControl]="form.controls['sequenceId']"
            required />
          <mat-hint align="start">Optional</mat-hint>
          <mat-icon matSuffix>mode_edit</mat-icon>
        </mat-form-field>

      </mat-sidenav>
      <mat-sidenav-content>
        <div class="form-section">
          <mat-tab-group color="accent">
            <mat-tab label="Parameters">TODO</mat-tab>
            <mat-tab label="Constraints">TODO</mat-tab>
            <mat-tab label="Sub Activities">
              <div class="sub-activities">
                <raven-sub-activity-tree></raven-sub-activity-tree>
                <div>
                  Placeholder for Details of selected sub-activity TDB.
                </div>
              </div>
            </mat-tab>
          </mat-tab-group>
        </div>
      </mat-sidenav-content>
      <mat-sidenav mode="side" position="end" opened="true">
        <aside>
          <div class="form-controls">
            <button id="cancel-button" mat-stroked-button color="primary" (click)="onClickCancel()">Cancel</button>
            <button id="save-button" mat-raised-button color="accent" *ngIf="isNew">Save</button>
            <button id="update-button" mat-raised-button color="accent" *ngIf="!isNew">Update</button>
          </div>
        </aside>
      </mat-sidenav>
    </mat-sidenav-container>
  </form>
</main>

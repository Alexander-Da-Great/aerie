<!doctype html>

<html>
  <head>
    <title>falcon-activity-band tests</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

    <script>window.ShadyDOM = { force: true };</script>
    <script src="./../../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="./../../../bower_components/web-component-tester/browser.js"></script>

    <link rel="import" href="./../elements/falcon-activity-band/falcon-activity-band.html" />
    <link rel="import" href="./../demo/data/bands.html" />

    <script src="./util/falcon-band-tests.js"></script>

    <style>
      test-fixture {
        display: block;
      }
    </style>
  </head>

  <body>
    <test-fixture id="BasicTestFixture">
      <template>
        <falcon-activity-band></falcon-activity-band>
      </template>
    </test-fixture>

    <test-fixture id="CtlBandPropertyTestFixture">
      <template>
        <falcon-activity-band
          activity-height="30"
          activity-style="2"
          align-label="1"
          baseline-label="1"
          border-width="10"
          height="100"
          height-padding="10"
          label="thatWasEasy"
          layout="2"
          name="someName"
          show-label="true"
          trim-label="true">
        </falcon-activity-band>
      </template>
    </test-fixture>

    <script>
      suite('<falcon-activity-band>', function() {
        window.falconBandTests('activityBand');

        test('instantiating the element with default activity band properties works', function() {
          const el = fixture('BasicTestFixture');
          const ctlBand = el.activityBand;

          // Element Props.
          assert.equal(el.activityHeight, 20);
          assert.equal(el.activityStyle, 1);
          assert.equal(el.alignLabel, 3);
          assert.equal(el.baselineLabel, 3);
          assert.equal(el.borderWidth, 1);
          assert.equal(el.layout, 1);
          assert.equal(el.showLabel, true);
          assert.equal(el.trimLabel, true);

          // CTL Options.
          assert.equal(ctlBand.painter.activityHeight, 20);
          assert.equal(ctlBand.painter.alignLabel, 3);
          assert.equal(ctlBand.painter.baselineLabel, 3);
          assert.equal(ctlBand.painter.borderWidth, 1);
          assert.equal(ctlBand.painter.layout, 1);
          assert.equal(ctlBand.painter.showLabel, true);
          assert.equal(ctlBand.painter.style, 1);
          assert.equal(ctlBand.painter.trimLabel, true);
        });

        test('setting the activityHeight property on the element works', function() {
          const el = fixture('CtlBandPropertyTestFixture');
          const ctlBand = el.activityBand;

          testPropChange(el, ctlBand.painter, 'activityHeight', 30, 40);
        });

        test('setting the activityStyle property on the element works', function() {
          const el = fixture('CtlBandPropertyTestFixture');
          const ctlBand = el.activityBand;

          // Prop set via attribute to x is correct in Polymer and CTL.
          assert.deepEqual(el.activityStyle, 2);
          assert.deepEqual(ctlBand.painter.style, 2);

          // Prop set programatically to y is correct in Polymer and CTL.
          el.activityStyle = 1;
          assert.deepEqual(el.activityStyle, 1);
          assert.deepEqual(ctlBand.painter.style, 1);
        });

        test('setting the alignLabel property on the element works', function() {
          const el = fixture('CtlBandPropertyTestFixture');
          const ctlBand = el.activityBand;

          testPropChange(el, ctlBand.painter, 'alignLabel', 1, 2);
        });

        test('setting the baselineLabel property on the element works', function() {
          const el = fixture('CtlBandPropertyTestFixture');
          const ctlBand = el.activityBand;

          testPropChange(el, ctlBand.painter, 'baselineLabel', 1, 2);
        });

        test('setting the borderWidth property on the element works', function() {
          const el = fixture('CtlBandPropertyTestFixture');
          const ctlBand = el.activityBand;

          testPropChange(el, ctlBand.painter, 'borderWidth', 10, 20);
        });

        test('setting the layout property on the element works', function() {
          const el = fixture('CtlBandPropertyTestFixture');
          const ctlBand = el.activityBand;

          testPropChange(el, ctlBand.painter, 'layout', 2, 1);
        });

        test('setting points property on the element works', function() {
          const el = fixture('BasicTestFixture');
          const ctlBand = el.activityBand;

          el.set('points', activityPoints);
          assert.equal(el.points.length, activityPoints.length);
          assert.equal(ctlBand.intervalsList[0].length, activityPoints.length);
        });

        test('setting the showLabel property on the element works', function() {
          const el = fixture('CtlBandPropertyTestFixture');
          const ctlBand = el.activityBand;

          testPropChange(el, ctlBand.painter, 'showLabel', true, false);
        });

        test('setting the trimLabel property on the element works', function() {
          const el = fixture('CtlBandPropertyTestFixture');
          const ctlBand = el.activityBand;

          testPropChange(el, ctlBand.painter, 'trimLabel', true, false);
        });
      });
    </script>
  </body>
</html>
